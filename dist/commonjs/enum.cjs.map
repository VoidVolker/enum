{"version":3,"file":"enum.cjs","names":["_is","require","Enum","hasProp","nullObj","Object","prototype","hasOwnProperty","create","exports","constructor","pairs","arr","options","i","key","len","opt","value","isObject","isArray","assign","default","next","call","TypeError","isNumber","length","toString","isString","typeGet","forKeys","cb","thisArg","forValues","ref","forEach","keys","results","values","hasKey","hasValue","raw","rawEnm","index","new","obj","enm","fromRaw","Symbol"],"sources":["../src/enum.coffee"],"sourcesContent":["import { isNumber, isString, isObject, isArray, typeGet } from '@voidvolker/is'\n\nhasProp = Object.prototype.hasOwnProperty\nnullObj = -> Object.create null\n\nclass Enum\n\n    @default:\n        i: 0\n\n    constructor: (pairs, arr, options = {}) ->\n        @key = nullObj()\n        @value = nullObj()\n\n        # In case of 2 arguments move 'options' from 'arr' (arr/obj and options)\n        if isObject arr\n            options = arr\n            arr = null\n\n        # In case of 1 or 2 arguments move 'arr' from 'obj' (arr, obj and arr; first case)\n        if isArray pairs\n            arr = pairs\n            pairs = null\n\n        opt = Object.assign {}, @constructor.default, Enum.default, options\n        @i = opt.i\n        @next = opt.next if opt.next\n\n        # Process key-value pairs\n        if pairs\n            for key, value of pairs\n                if hasProp.call @value, value\n                    throw new TypeError \"Enum '#{key}: #{value}' value already defined as: '#{@value[value]}: #{value}'\"\n                if not isNumber value\n                    throw new TypeError 'Only number type enum value is allowed: ' + value\n                @key[key] = value\n                @value[value] = key\n                @i = value\n\n        # Process keys with autoincrement\n        if arr\n            for key in arr\n                @next() while hasProp.call @value, @i.toString()\n                if not isString key\n                    throw new TypeError \"Only string enum name is allowed: #{key}<#{typeGet key}>\"\n                if hasProp.call @key, key\n                    throw new TypeError \"Enum '#{key}: #{@i}' name already defined as: '#{key}: #{@key[key]}'\"\n                @key[key] = @i\n                @value[@i] = key\n            @next()\n\n    forKeys: (cb, thisArg) ->\n        thisArg = thisArg or @\n        for key of @key\n            cb.call thisArg, key\n        @\n\n    forValues: (cb, thisArg) ->\n        thisArg = thisArg or @\n        for key, value of @key\n            cb.call thisArg, value\n        @\n\n    forEach: (cb, thisArg) ->\n        thisArg = thisArg or @\n        for key, value of @key\n            cb.call thisArg, key, value\n        @\n\n    keys: -> key for key of @key\n\n    values: -> value for key, value of @key\n\n    hasKey: (key) -> hasProp.call @key, key\n\n    hasValue: (value) -> hasProp.call @value, value\n\n    raw: ->\n        rawEnm = nullObj()\n        for key, value of @key\n            rawEnm[key] = value\n            rawEnm[value] = key\n        rawEnm[Enum.index] = @i\n        rawEnm\n\n    next: Enum.next\n\n    # Index symbol for raw enums\n    @index: Symbol 'i'\n\n    # Global counter\n    @i: 0\n\n    @next: -> @i++\n\n    # Enum initiated from global counter\n    @new: (obj, arr, options = {}) ->\n        # In case of 2 arguments move 'options' from 'arr' (arr/obj and options)\n        if isObject arr\n            options = arr\n            arr = null\n        # Set global counter\n        options.i = @i if not options.hasOwnProperty 'i'\n        # Create new enum using global counter and this as constructor\n        enm = new @ obj, arr, options\n        @i = enm.i\n        enm\n\n    @raw: (obj, arr, options) -> new @(obj, arr, options).raw()\n\n    @fromRaw: (rawEnm) ->\n        keys = {}\n        for key, value of rawEnm\n            if isNumber value\n                keys[key] = value\n        new @ keys\n\n\nexport default Enum\nexport { Enum }\n"],"mappings":"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"}