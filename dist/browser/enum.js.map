{"version":3,"file":"enum.js","names":["Enum","hasProp","nullObj","isNumber","isString","isObject","isArray","typeGet","Object","prototype","hasOwnProperty","create","constructor","pairs","arr","options","arguments","length","undefined","i","key","len","opt","value","assign","default","next","call","TypeError","toString","forKeys","cb","thisArg","forValues","ref","forEach","keys","results","values","hasKey","hasValue","raw","rawEnm","index","new","obj","enm","fromRaw","Symbol"],"sources":["../src/enum.coffee"],"sourcesContent":["import { isNumber, isString, isObject, isArray, typeGet } from '@voidvolker/is'\n\nhasProp = Object.prototype.hasOwnProperty\nnullObj = -> Object.create null\n\nclass Enum\n\n    @default:\n        i: 0\n\n    constructor: (pairs, arr, options = {}) ->\n        @key = nullObj()\n        @value = nullObj()\n\n        # In case of 2 arguments move 'options' from 'arr' (arr/obj and options)\n        if isObject arr\n            options = arr\n            arr = null\n\n        # In case of 1 or 2 arguments move 'arr' from 'obj' (arr, obj and arr; first case)\n        if isArray pairs\n            arr = pairs\n            pairs = null\n\n        opt = Object.assign {}, @constructor.default, Enum.default, options\n        @i = opt.i\n        @next = opt.next if opt.next\n\n        # Process key-value pairs\n        if pairs\n            for key, value of pairs\n                if hasProp.call @value, value\n                    throw new TypeError \"Enum '#{key}: #{value}' value already defined as: '#{@value[value]}: #{value}'\"\n                if not isNumber value\n                    throw new TypeError 'Only number type enum value is allowed: ' + value\n                @key[key] = value\n                @value[value] = key\n                @i = value\n\n        # Process keys with autoincrement\n        if arr\n            for key in arr\n                @next() while hasProp.call @value, @i.toString()\n                if not isString key\n                    throw new TypeError \"Only string enum name is allowed: #{key}<#{typeGet key}>\"\n                if hasProp.call @key, key\n                    throw new TypeError \"Enum '#{key}: #{@i}' name already defined as: '#{key}: #{@key[key]}'\"\n                @key[key] = @i\n                @value[@i] = key\n            @next()\n\n    forKeys: (cb, thisArg) ->\n        thisArg = thisArg or @\n        for key of @key\n            cb.call thisArg, key\n        @\n\n    forValues: (cb, thisArg) ->\n        thisArg = thisArg or @\n        for key, value of @key\n            cb.call thisArg, value\n        @\n\n    forEach: (cb, thisArg) ->\n        thisArg = thisArg or @\n        for key, value of @key\n            cb.call thisArg, key, value\n        @\n\n    keys: -> key for key of @key\n\n    values: -> value for key, value of @key\n\n    hasKey: (key) -> hasProp.call @key, key\n\n    hasValue: (value) -> hasProp.call @value, value\n\n    raw: ->\n        rawEnm = nullObj()\n        for key, value of @key\n            rawEnm[key] = value\n            rawEnm[value] = key\n        rawEnm[Enum.index] = @i\n        rawEnm\n\n    next: Enum.next\n\n    # Index symbol for raw enums\n    @index: Symbol 'i'\n\n    # Global counter\n    @i: 0\n\n    @next: -> @i++\n\n    # Enum initiated from global counter\n    @new: (obj, arr, options = {}) ->\n        # In case of 2 arguments move 'options' from 'arr' (arr/obj and options)\n        if isObject arr\n            options = arr\n            arr = null\n        # Set global counter\n        options.i = @i if not options.hasOwnProperty 'i'\n        # Create new enum using global counter and this as constructor\n        enm = new @ obj, arr, options\n        @i = enm.i\n        enm\n\n    @raw: (obj, arr, options) -> new @(obj, arr, options).raw()\n\n    @fromRaw: (rawEnm) ->\n        keys = {}\n        for key, value of rawEnm\n            if isNumber value\n                keys[key] = value\n        new @ keys\n\n\nexport default Enum\nexport { Enum }\n"],"mappings":"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"}